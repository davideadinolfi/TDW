{% extends "layout.twig" %}
{% block title %}{{ page_title }}{% endblock %}

{% block content %}
    <h2>Accedi</h2>

    {# VISUALIZZAZIONE MESSAGGIO FLASH (Successo) #}
    {% if flash_success %}
        <p class="success">{{ flash_success }}</p>
    {% endif %}

    {# VISUALIZZAZIONE ERRORI #}
    {% if errors is not empty %}
        <div class="errors">
            <ul>
                {% for error in errors %}
                    {# Twig gestisce l'escaping #}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {# MODULO DI LOGIN #}
    <form method="post" action="login.php">
        {# Token CSRF (valore passato dal Controller) #}
        <input type="hidden" name="csrf" value="{{ csrf_token }}">
        
        <label>Email<br>
            {# Valore pre-compilato (passato dal Controller) #}
            <input type="email" name="email" value="{{ email_value }}">
        </label><br>
        
        <label>Password<br>
            <input type="password" name="password">
        </label><br>
        
        <button type="submit">Accedi</button>
    </form>

    <p>Non hai un account? <a href="register.php">Registrati</a></p>

{% endblock %}